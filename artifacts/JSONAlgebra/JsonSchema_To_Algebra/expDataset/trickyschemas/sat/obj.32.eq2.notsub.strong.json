{
  "allOf": [
    {
      "not": {
        "patternProperties": {
          "a.*": {
            "minLength": 3
          }
        }
      },
      "maxProperties": 1
    },
    {
      "not": {
        "allOf": [
          {
            "type": "object",
            "patternProperties": {
              "a.*": {
                "type": "string"
              }
            },
            "additionalProperties": {
              "type": "string",
              "minLength": 3
            },
            "minProperties": 1,
            "maxProperties": 1
          },
          {
            "patternProperties": {
              ".*": {
                "_maxLength": 2,
                "maxLength": 1,
                "_maxLengthWeak": 3
              }
            }
          }
        ]
      }
    }
  ]
}

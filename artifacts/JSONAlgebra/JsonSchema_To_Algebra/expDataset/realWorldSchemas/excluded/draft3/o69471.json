{
    "$schema": "http://json-schema.org/draft-04/schema",
    "_auth_fields": [
        "username",
        "first_name",
        "last_name",
        "stories"
    ],
    "_auth_model": true,
    "_hidden_fields": [
        "password"
    ],
    "_nested_relationships": [
        "profile"
    ],
    "_public_fields": [
        "username"
    ],
    "properties": {
        "assigned_stories": {
            "_db_settings": {
                "backref_name": "assignee",
                "backref_ondelete": "NULLIFY",
                "document": "Story",
                "foreign_keys": "Story.assignee_id",
                "ondelete": "NULLIFY",
                "type": "relationship"
            },
            "items": {
                "oneOf": [
                    {
                        "type": "string"
                    },
                    {
                        "type": "integer"
                    }
                ]
            },
            "type": [
                "array",
                "null"
            ]
        },
        "created_at": {
            "_db_settings": {
                "default": "{{datetime.datetime.utcnow}}",
                "type": "datetime"
            },
            "format": "date-time",
            "type": [
                "string",
                "null"
            ]
        },
        "email": {
            "_db_settings": {
                "required": true,
                "type": "string",
                "unique": true
            },
            "_format": "email",
            "_processors": [
                "lowercase"
            ],
            "type": "string"
        },
        "first_name": {
            "_db_settings": {
                "default": "",
                "max_length": 50,
                "type": "string"
            },
            "default": "",
            "maxLength": 50,
            "type": [
                "string",
                "null"
            ]
        },
        "groups": {
            "_db_settings": {
                "choices": [
                    "admin",
                    "user"
                ],
                "default": [
                    "user"
                ],
                "item_type": "string",
                "type": "list"
            },
            "default": [
                "user"
            ],
            "items": {
                "enum": [
                    "admin",
                    "user"
                ],
                "type": "string"
            },
            "type": [
                "array",
                "null"
            ]
        },
        "last_login": {
            "_db_settings": {
                "type": "datetime"
            },
            "format": "date-time",
            "type": [
                "string",
                "null"
            ]
        },
        "last_name": {
            "_db_settings": {
                "default": "",
                "max_length": 50,
                "type": "string"
            },
            "default": "",
            "maxLength": 50,
            "type": [
                "string",
                "null"
            ]
        },
        "password": {
            "_db_settings": {
                "min_length": 3,
                "required": true,
                "type": "string"
            },
            "_processors": [
                "encrypt"
            ],
            "minLength": 3,
            "type": "string"
        },
        "profile": {
            "_db_settings": {
                "backref_name": "user",
                "document": "Profile",
                "type": "relationship",
                "uselist": false
            },
            "type": [
                "integer",
                "string"
            ]
        },
        "settings": {
            "_db_settings": {
                "type": "dict"
            },
            "type": [
                "object",
                "null"
            ]
        },
        "status": {
            "_db_settings": {
                "choices": [
                    "active",
                    "inactive",
                    "blocked"
                ],
                "default": "active",
                "type": "choice"
            },
            "default": "active",
            "enum": [
                "active",
                "inactive",
                "blocked"
            ],
            "type": [
                "string",
                "null"
            ]
        },
        "stories": {
            "_db_settings": {
                "backref_name": "owner",
                "backref_ondelete": "NULLIFY",
                "document": "Story",
                "foreign_keys": "Story.owner_id",
                "ondelete": "NULLIFY",
                "type": "relationship"
            },
            "items": {
                "oneOf": [
                    {
                        "type": "string"
                    },
                    {
                        "type": "integer"
                    }
                ]
            },
            "type": [
                "array",
                "null"
            ]
        },
        "updated_at": {
            "_db_settings": {
                "onupdate": "{{datetime.datetime.utcnow}}",
                "type": "datetime"
            },
            "format": "date-time",
            "type": [
                "string",
                "null"
            ]
        },
        "username": {
            "_db_settings": {
                "max_length": 50,
                "min_length": 1,
                "primary_key": true,
                "required": true,
                "type": "string",
                "unique": true
            },
            "_processors": [
                "lowercase"
            ],
            "maxLength": 50,
            "minLength": 1,
            "type": "string"
        }
    },
    "required": [
        "username",
        "email",
        "password"
    ],
    "title": "User schema",
    "type": "object"
}
{
  "allOf": [
    {
      "type": "object",
      "allOf": [
        {
          "properties": {
            "a": {
              "type": "array",
              "_minItems": 3,
              "minItems": 4,
              "_minItemsWeak": 2
            }
          }
        },
        {
          "properties": {
            "b": {
              "type": "array",
              "minItems": 3
            }
          }
        }
      ]
    },
    {
      "not": {
        "type": "object",
        "patternProperties": {
          "^(a|b)$": {
            "type": "array",
            "minItems": 3
          }
        }
      }
    }
  ]
}
